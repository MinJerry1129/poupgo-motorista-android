package com.general.files;

import android.content.Context;
import android.os.Handler;

import com.general.functions.GeneralFunctions;
import com.utilities.general.files.UpdateFrequentTask;

public class DispatchDemoLocations implements UpdateFrequentTask.OnTaskRunCalled {
    Context mContext;

    public DispatchDemoLocations(Context mContext) {
        this.mContext = mContext;
    }

    String latitudes = "23.011789,23.011867,23.011867,23.011909,23.011899,23.011899,23.011982,23.012189,23.012511,23.012749,23.013330,23.013517,23.01673,23.013904,23.014013,23.014021,23.014021,23.014043,23.014028,23.014050,23.014035,23.014057,23.014043,23.014065,23.014065,23.014065,23.014050,23.014079,23.014050,23.014072,23.014108,23.014007,23.013877,23.013696,23.013566,23.013443,23.013313,23.013154,23.013019,23.012864,23.012707,23.012526,23.012369,23.012283,23.012165,23.012055,23.012102,23.012165,23.012212,23.012267,23.012299,23.012362,23.012385,23.012416,23.012462,23.012517,23.012557,23.012613,23.012652,23.012684,23.012708,23.012748,23.012748,23.012795,23.012795,23.012779,23.012795,23.012716,23.012756,23.012859,23.012891,23.012906,23.012983,23.013127,23.013137,23.013175,23.013194,23.013231,23.013302,23.013322,23.013362,23.013423,23.013423,23.013453,23.013483,23.013514,23.013604,23.013625,23.013675,23.013735,23.013796,23.013887,23.013957,23.014038,23.014169,23.014260,23.014381,23.014451,23.014611,23.014733,23.015099,23.015567,23.015879,23.016142,23.016386,23.016679,23.016922,23.017215,23.017576,23.017946,23.018239,23.018453,23.018960,23.019282,23.019575,23.019906,23.020813,23.021174,23.021622,23.021905,23.022232,23.022626,23.023222,23.023511,23.023886,23.024222,23.024463,23.024568,23.024617,23.024674,23.024828,23.025001,23.025174,23.025357,23.025549,23.025444,23.025645,23.025857,23.026088,23.026588,23.026900,23.027160,23.027372,23.027703,23.027944,23.028170,23.028439,23.028487,23.028583,23.028723,23.028862,23.029001,23.029136,23.029290,23.029362,23.029586,23.029427,23.029295,23.028937,23.028712,23.028434,23.028302,23.029070,23.029944,23.030725,23.031321,23.031797,23.032155,23.032486,23.032790,23.033174,23.033770,23.034154,23.034366,23.034683,23.035028,23.035332,23.035610,23.035888,23.036113,23.037157,23.037354,23.037441,23.037430,23.037419,23.037518,23.037572,23.037266,23.036720,23.036446";

    String longitude = "72.503335,72.503710,72.504398,72.505288,72.505897,72.506404,72.506720,72.506653,72.506630,72.506641,72.506529,72.506517,72.506529,72.506529,72.506529,72.506712,72.506926,72.507094,72.507316,72.507571,72.507786,72.508120,72.508279,72.508470,72.508629,72.508781,72.508956,72.509097,72.509191,72.509356,72.509568,72.509693,72.509740,72.509811,72.509866,72.509952,72.510039,72.510071,72.510156,72.510280,72.510348,72.510459,72.510536,72.510596,72.510655,72.510732,72.510920,72.511184,72.511440,72.511645,72.511816,72.512021,72.512234,72.512430,72.512557,72.512859,72.513170,72.513464,72.513861,72.514206,72.514517,72.514819,72.515069,72.515363,72.515639,72.515924,72.516166,72.516520,72.516805,72.517556,72.517798,72.518917,72.519377,72.520890,72.521298,72.521778,72.522269,72.522925,72.523209,72.523538,72.523867,72.524228,72.524590,72.524820,72.525094,72.525368,72.525729,72.526014,72.526310,72.526529,72.526781,72.527022,72.527318,72.527713,72.528162,72.528501,72.528940,72.529290,72.530183,72.530507,72.530412,72.530327,72.530263,72.530253,72.530200,72.530105,72.530136,72.530062,72.530030,72.530009,72.529999,72.530009,72.529998,72.530062,72.530073,72.530020,72.530083,72.530126,72.530104,72.530146,72.530115,72.530083,72.530094,72.530125,72.530136,72.530104,72.530115,72.529738,72.529352,72.528944,72.528485,72.528108,72.527691,72.527346,72.526959,72.526573,72.526176,72.526196,72.526531,72.526395,72.526385,72.526353,72.526395,72.526458,72.526546,72.526583,72.526667,72.526855,72.526991,72.527231,72.527398,72.527570,72.527758,72.527926,72.528046,72.528776,72.529122,72.529539,72.530057,72.530503,72.531006,72.531611,72.531898,72.532416,72.532862,72.533250,72.533524,72.533927,72.534171,72.534473,72.534804,72.535279,72.535567,72.535135,72.534517,72.533884,72.533308,72.532862,72.532430,72.532100,72.530871,72.530373,72.529814,72.529125,72.528698,72.528187,72.527736,72.527724,72.527653,72.527617";

    String[] latitudesArr = latitudes.split(",");
    String[] longitudesArr = longitude.split(",");

    UpdateFrequentTask updateFreqTask;
    DemoLocationDispatchListener dispatchListener;

    int currentPosition = 0;



    public void startDispatchingLocations(DemoLocationDispatchListener dispatchListener) {
        this.dispatchListener = dispatchListener;
        if (updateFreqTask == null) {
            updateFreqTask = new UpdateFrequentTask(1000);
            updateFreqTask.setTaskRunListener(this);
        }

        new Handler().postDelayed(() -> updateFreqTask.startRepeatingTask(), 3000);
    }

    public void stopDispatchingDemoLocations() {
        if (updateFreqTask != null) {
            updateFreqTask.stopRepeatingTask();
        }
    }

    @Override
    public void onTaskRun() {
        if (dispatchListener != null) {
            if (currentPosition >= latitudesArr.length || currentPosition >= longitudesArr.length) {
                currentPosition = 0;
            }
            dispatchListener.onDemoLocationDispatch(GeneralFunctions.parseDoubleValue(0.0, latitudesArr[currentPosition]), GeneralFunctions.parseDoubleValue(0.0, longitudesArr[currentPosition]));
            currentPosition++;
        } else {
            stopDispatchingDemoLocations();
        }
    }

    public interface DemoLocationDispatchListener {
        void onDemoLocationDispatch(double latitude, double longitude);
    }

}